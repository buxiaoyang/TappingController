C51 COMPILER V7.50   MAIN                                                                  08/04/2014 22:05:44 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Output\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Source\main.c BROWSE INCDIR(.\source) DEBUG OBJECTEXTEND PRINT(.\Listing\ma
                    -in.lst) OBJECT(.\Output\main.obj)

line level    source

   1          /*------------------------------------------------------------------*/
   2          /* --- STC MCU Limited ---------------------------------------------*/
   3          /* --- STC12C5Axx Series MCU UART (8-bit/9-bit)Demo ----------------*/
   4          /* --- Mobile: (86)13922805190 -------------------------------------*/
   5          /* --- Fax: 86-755-82905966 ----------------------------------------*/
   6          /* --- Tel: 86-755-82948412 ----------------------------------------*/
   7          /* --- Web: www.STCMCU.com -----------------------------------------*/
   8          /* If you want to use the program or the program referenced in the  */
   9          /* article, please specify in which data and procedures from STC    */
  10          /*------------------------------------------------------------------*/
  11          
  12          #include <reg52.h>
  13          #include <basefunc.h>
  14          #include <parameter.h>
  15          #include <uart.h>
  16          #include <timer.h>
  17          #include <key.h>
  18          #include <dispatch.h>
  19          
  20          void parameter_send_screen()
  21          {
  22   1              SendDataToScreen(0x0000,runMode); //运行模式    0：手动模式(停止)  1：自动模式(停止) 2：手动模式(启动) 3：自
             -动模式(启动)   返回数据0xEE
  23   1              
  24   1              SendDataToScreen(0x0001,montorMode); //电机状态 0：电机停止   1：电机启动  返回数据0xEE
  25   1              SendDataToScreen(0x0002,sensor1); //传感器1     0：无效  1：有效  2：错误
  26   1              SendDataToScreen(0x0003,sensor2); //传感器2     0：无效  1：有效  2：错误
  27   1              SendDataToScreen(0x0004,sensor3); //传感器3     0：无效  1：有效  2：错误
  28   1              SendDataToScreen(0x0005,sensor4); //传感器4     0：无效  1：有效  2：错误
  29   1              SendDataToScreen(0x0006,sensor5); //传感器5     0：无效  1：有效  2：错误
  30   1              SendDataToScreen(0x0007,sensor6); //传感器6     0：无效  1：有效  2：错误
  31   1              SendDataToScreen(0x0008,sensor7); //传感器7     0：无效  1：有效  2：错误
  32   1              SendDataToScreen(0x0009,sensor8); //传感器8     0：无效  1：有效  2：错误
  33   1              SendDataToScreen(0x000A,sensor9); //传感器9     0：无效  1：有效  2：错误
  34   1              SendDataToScreen(0x000B,sensor10); //传感器10   0：无效  1：有效  2：错误
  35   1              
  36   1              SendDataToScreen(0x000C,cylinder1); //气缸1     0：无效  1：有效  2：错误
  37   1              SendDataToScreen(0x000D,cylinder2); //气缸2     0：无效  1：有效  2：错误
  38   1              SendDataToScreen(0x000E,cylinder3); //气缸3     0：无效  1：有效  2：错误
  39   1              SendDataToScreen(0x000F,cylinder4); //气缸4     0：无效  1：有效  2：错误
  40   1              SendDataToScreen(0x0010,cylinder5); //气缸5     0：无效  1：有效  2：错误
  41   1              
  42   1              SendDataToScreen(0x0011,intervalTimer1); //时间设置1    字(int) 最大9.9
  43   1              SendDataToScreen(0x0012,intervalTimer2); //时间设置2    字(int) 最大9.9
  44   1              SendDataToScreen(0x0013,intervalTimer3); //时间设置3    字(int) 最大9.9
  45   1              SendDataToScreen(0x0014,intervalTimer4); //时间设置4    字(int) 最大9.9
  46   1              SendDataToScreen(0x0015,intervalTimer5); //时间设置5    字(int) 最大9.9
  47   1              SendDataToScreen(0x0016,intervalTimer6); //时间设置6    字(int) 最大9.9
  48   1              SendDataToScreen(0x0017,intervalTimer7); //时间设置7    字(int) 最大9.9
  49   1              
  50   1              SendDataToScreen(0x0018,cylinderAlarm1); //报警设置 气缸1       字(int)
  51   1              SendDataToScreen(0x0019,cylinderAlarm2); //报警设置 气缸2       字(int)
  52   1              SendDataToScreen(0x001A,cylinderAlarm3); //报警设置 气缸3       字(int)
  53   1              SendDataToScreen(0x001B,cylinderAlarm4); //报警设置 气缸4       字(int)
C51 COMPILER V7.50   MAIN                                                                  08/04/2014 22:05:44 PAGE 2   

  54   1              SendDataToScreen(0x001C,cylinderAlarm5); //报警设置 气缸5       字(int)
  55   1      
  56   1              SendDataToScreen(0x0023,pieceCount); 
  57   1      }
  58          
  59          void main()
  60          {
  61   1              uart_init();
  62   1              //timer_init();
  63   1              parameter_init();
  64   1              while(1)
  65   1              {       
  66   2                      parameter_send_screen();
  67   2                      TestOut = ! TestOut;   
  68   2                      if(KeyAutoManual == 1)
  69   2                      {
  70   3                              runMode = 1;
  71   3                      }
  72   2                      else
  73   2                      {
  74   3                              runMode = 0;
  75   3                      } 
  76   2                      Key_Scan();
  77   2                      ManiDispatch();
  78   2                      SubDispatch();
  79   2              }   
  80   1      }
  81          
  82          
  83          
  84          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    391    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
